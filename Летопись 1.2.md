# –õ–µ—Ç–æ–ø–∏—Å—å –ù–∞–∑–∞—Ä–∏–∫–∞ ‚Äî –°–∏—Å—Ç–µ–º–∞ –ü–æ–¥—Å–∫–∞–∑–æ–∫ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)

> –ü–æ–º–µ—Ç–∫–∏: **–ò–ó–ú–ï–ù–ï–ù–û** ‚Äî –ø–æ–ø—Ä–∞–≤–ª–µ–Ω–æ; **–£–î–ê–õ–ï–ù–û** ‚Äî –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º; **–î–û–ë–ê–í–õ–ï–ù–û** ‚Äî –Ω–æ–≤–æ–µ.

---

üé≠ **–û–±—â–∞—è —Ü–µ–ª—å**  
–û—Ç–æ–±—Ä–∞–∑–∏—Ç—å `WBP_TutorialPrompt` –Ω–∞ —ç–∫—Ä–∞–Ω–µ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `DT_TutorialPrompts`.  
**–°—Ç–∞—Ç—É—Å:** –≤–∏–¥–∂–µ—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ (**–ò–ó–ú–ï–ù–ï–ù–û**), –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è/—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `Show/ForceFadeOut`.

---

üì¶ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**

**–í BP_TutorialManager**

- `PendingQueue` (Array(Name)) ‚Äî –æ—á–µ—Ä–µ–¥—å ID –ø–æ–¥—Å–∫–∞–∑–æ–∫.
    
- `CompletedIDs` (Array(Name)) ‚Äî –ø–æ–∫–∞–∑–∞–Ω–Ω—ã–µ ID.
    
- `CurrentID` (Name) ‚Äî —Ç–µ–∫—É—â–∞—è.
    
- `TransitionInProgress` (Bool) ‚Äî –∏–¥—ë—Ç –ø–æ–∫–∞–∑.
    
- `WidgetRef` (`WBP_TutorialPrompt`) ‚Äî —ç–∫–∑–µ–º–ø–ª—è—Ä –≤–∏–¥–∂–µ—Ç–∞.
    
- _(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)_ `CinematicLock` (Bool).
    

**–í WBP_TutorialPrompt**

- `PromptText` (Text) ‚Äî **–±–∏–Ω–¥** –Ω–∞ `T_Prompt.Text`. (**–ò–ó–ú–ï–ù–ï–ù–û**: —Ç–µ–∫—Å—Ç –º–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —ç—Ç—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é.)
    
- `DisplayTime` (Float) ‚Äî –≤—Ä–µ–º—è –ø–æ–∫–∞–∑–∞.
    
- `bAutoFadeOut` (Bool) ‚Äî –∞–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ.
    
- `PromptRoot` (–∫–æ—Ä–Ω–µ–≤–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä).
    
- `T_Prompt` (TextBlock) ‚Äî —Å–∞–º —Ç–µ–∫—Å—Ç.
    

---

‚öôÔ∏è **–§—É–Ω–∫—Ü–∏–∏ –∏ —Å—Ö–µ–º—ã**

1. **ShowTutorial(ID)** ‚Äî –∑–∞–ø—Ä–æ—Å –ø–æ–∫–∞–∑–∞  
    **–°—Ö–µ–º–∞ (–∞–∫—Ç—É–∞–ª—å–Ω–æ):**  
    `Exec ‚Üí Branch(TransitionInProgress || CinematicLock)`
    

- **True**: `PendingQueue.Add(ID)` ‚Üí –≤—ã—Ö–æ–¥.
    
- **False**: `GetPromptRow(ID)` ‚Üí –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –µ—Å—Ç—å –∏ **(Repeatable==true –∏–ª–∏ ID –Ω–µ –≤ CompletedIDs)**:  
    `Set CurrentID=ID ‚Üí Set TransitionInProgress=true ‚Üí Print [M5] ‚Üí WidgetRef.StartDisplay(Row.Text, Row.Time)`.
    

**Print:**

- `[M1] ShowTutorial ID={ID}`.
    

2. **TryShowNext()** ‚Äî –≤–∑—è—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∏–∑ –æ—á–µ—Ä–µ–¥–∏  
    `Exec ‚Üí Print [M2] ‚Üí if (TransitionInProgress) return ‚Üí if (Queue.Len>0)`
    

- –ë–µ—Ä—ë–º —ç–ª–µ–º–µ–Ω—Ç `0` (Dequeue) ‚Üí `Print [M3]` ‚Üí `GetPromptRow(TempID)` ‚Üí  
    –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –Ω–µ ¬´–ø–æ–≤—Ç–æ—Ä –∑–∞–ø—Ä–µ—â—ë–Ω —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω–Ω—ã–º¬ª ‚Üí  
    `Set CurrentID=TempID ‚Üí Set TransitionInProgress=true ‚Üí Print [M5] ‚Üí WidgetRef.StartDisplay(Row.Text, Row.Time)`;  
    –∏–Ω–∞—á–µ ‚Äî —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ `TryShowNext()`.
    

3. **GetPromptRow(ID)** ‚Äî —Å—Ç—Ä–æ–∫–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã  
    –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ —Å–º—ã—Å–ª—É.  
    **Print:**
    

- `[M4] RowFound | Text={Text} | Time={Time} | Auto={AutoFadeOut}`
    
- `[M4X] Row NOT found for ID={ID}`.
    

4. **ApplyData** ‚Äî **–£–î–ê–õ–ï–ù–û –∏–∑ –∫–æ–Ω–≤–µ–π–µ—Ä–∞ –ø–æ–∫–∞–∑–∞**  
    –†–∞–Ω–µ–µ –ø—Ä–∏–º–µ–Ω—è–ª–∏ –∫ –≤–∏–¥–∂–µ—Ç—É. –¢–µ–ø–µ—Ä—å —Ç–µ–∫—Å—Ç/–≤—Ä–µ–º—è –∑–∞–¥–∞—ë–º —á–µ—Ä–µ–∑ `StartDisplay`.  
    **–°–æ—Å—Ç–æ—è–Ω–∏–µ:** –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ –∫–∞–∫ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –Ω–æ **–Ω–µ –≤—ã–∑—ã–≤–∞—Ç—å** –∏–∑ –º–µ–Ω–µ–¥–∂–µ—Ä–∞. (**–ò–ó–ú–ï–ù–ï–ù–û**)
    
5. **StartDisplay(Text, Duration)** ‚Äî –∑–∞–ø—É—Å–∫ –ø–æ–∫–∞–∑–∞ (**–ò–ó–ú–ï–ù–ï–ù–û**)  
    `Set PromptText=Text ‚Üí Set DisplayTime=Duration ‚Üí Print [W2] ‚Üí Call Show()`.
    
6. **Show (Custom Event)** ‚Äî —Å–¥–µ–ª–∞—Ç—å –≤–∏–¥–∂–µ—Ç –≤–∏–¥–∏–º—ã–º (**–ò–ó–ú–ï–ù–ï–ù–û**)  
    `Print [W3+] ‚Üí Stop All Animations ‚Üí Set Visibility(Self, Visible) ‚Üí Set Visibility(PromptRoot, Visible) ‚Üí Set Render Opacity(PromptRoot, 0.0) ‚Üí Play Animation(FadeIn) ‚Üí Print [W3] ‚Üí Branch(bAutoFadeOut)`
    

- **True**: `Delay(DisplayTime) ‚Üí ForceFadeOut`
    
- **False**: –Ω–∏—á–µ–≥–æ (–∂–¥—ë–º —Ä—É—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è).  
    **–£–î–ê–õ–ï–ù–û:** `Add to Viewport` (—Ç–µ–ø–µ—Ä—å –≤–∏–¥–∂–µ—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ **BeginPlay**).
    

7. **ForceFadeOut** ‚Äî –∑–∞–∫—Ä—ã—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É (**–ò–ó–ú–ï–ù–ï–ù–û**)  
    `Stop All Animations ‚Üí Play Animation(FadeOut) ‚Üí On Finished: Set Visibility(Collapsed) ‚Üí Print [W5] ‚Üí OnPromptFinished (Dispatcher)`.
    
8. **OnFadeOutFinished (Manager)** ‚Äî **–ü–ï–†–ï–ò–ú–ï–ù–û–í–ê–ù–û –≤** `HandlePromptFinished` (**–ò–ó–ú–ï–ù–ï–ù–û**)  
    –¢–µ–ø–µ—Ä—å –ª–æ–≤–∏–º **Dispatcher** `OnPromptFinished` –æ—Ç –≤–∏–¥–∂–µ—Ç–∞:  
    `GetPromptRow(CurrentID) ‚Üí –µ—Å–ª–∏ (RowFound && !Repeatable) ‚Üí AddUnique(CompletedIDs, CurrentID) ‚Üí Print [M6] (–ø–æ–∫–∞ CurrentID –µ—â—ë —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω) ‚Üí Set CurrentID=None ‚Üí Set TransitionInProgress=false ‚Üí TryShowNext()`.
    

---

üîó **–¶–µ–ø–æ—á–∫–∞ –ª–æ–≥–∏–∫–∏ (9 —ç—Ç–∞–ø–æ–≤, –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å)**

1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã ‚úÖ
    
2. **–°–æ–∑–¥–∞–Ω–∏–µ –∏ —Å–∫—Ä—ã—Ç–∏–µ –≤–∏–¥–∂–µ—Ç–∞ –Ω–∞ BeginPlay** ‚úÖ  
    `BeginPlay ‚Üí GetPlayerController(0) ‚Üí CreateWidget(WBP_TutorialPrompt) ‚Üí WidgetRef ‚Üí AddToViewport(Z=1000) ‚Üí SetVisibility(Collapsed) ‚Üí Bind OnPromptFinished ‚Üí HandlePromptFinished`.
    
3. –í—ã–∑–æ–≤ `ShowTutorial(ID)` ‚úÖ (`[M1]`)
    
4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ ID –≤ `PendingQueue` (–µ—Å–ª–∏ –∑–∞–Ω—è—Ç—ã) ‚úÖ
    
5. `TryShowNext()` –±–µ—Ä—ë—Ç –∏–∑ –æ—á–µ—Ä–µ–¥–∏ ‚úÖ (`[M2]`, `[M3]`)
    
6. `GetPromptRow` —á–∏—Ç–∞–µ—Ç —Å—Ç—Ä–æ–∫—É ‚úÖ (`[M4]/[M4X]`)
    
7. –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–∂–µ—Ç ‚Äî **—á–µ—Ä–µ–∑ `StartDisplay`** ‚úÖ (`[W2]`) (**–ò–ó–ú–ï–ù–ï–ù–û**)
    
8. –ü–æ–∫–∞–∑ –Ω–∞ —ç–∫—Ä–∞–Ω–µ ‚Äî `Show` —Å –∞–≤—Ç–æ-–≤–µ—Ç–∫–æ–π **Delay‚ÜíForceFadeOut** ‚úÖ (`[W3+]`, `[W3]`) (**–î–û–ë–ê–í–õ–ï–ù–û –≤–µ—Ç–≤–ª–µ–Ω–∏–µ**)
    
9. –ó–∞–∫—Ä—ã—Ç–∏–µ –∏ –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π ‚Äî `ForceFadeOut ‚Üí HandlePromptFinished` ‚úÖ (`[W5]`, `[M6]`) (**–ò–ó–ú–ï–ù–ï–ù–û: —á–µ—Ä–µ–∑ Dispatcher**)
    

---

üñ®Ô∏è **–®–∞–±–ª–æ–Ω PrintString (–∞–∫—Ç—É–∞–ª—å–Ω—ã–π)**

**–í –º–µ–Ω–µ–¥–∂–µ—Ä–µ**

- `[M0] Created Widget | OwningPlayer=Valid` ‚Äî –±–µ–ª—ã–π, 2—Å. (**–î–û–ë–ê–í–õ–ï–ù–û**)
    
- `[M1] ShowTutorial ID={ID}` ‚Äî –∂—ë–ª—Ç—ã–π, 2—Å.
    
- `[M2] TryShowNext | TransitionInProgress={S} | QueueLen={Q}` ‚Äî –±–µ–ª—ã–π, 2—Å.
    
- `[M3] Dequeue ID={ID}` ‚Äî –∂—ë–ª—Ç—ã–π, 2—Å.
    
- `[M4] RowFound | Text={Text} | Time={Time} | Auto={AutoFadeOut}` ‚Äî –∑–µ–ª—ë–Ω—ã–π, 2—Å.
    
- `[M4X] Row NOT found for ID={ID}` ‚Äî –∫—Ä–∞—Å–Ω—ã–π, 2—Å.
    
- `[M5] Call StartDisplay | Text={Text} | Duration={Time}` ‚Äî –≥–æ–ª—É–±–æ–π, 2—Å.
    
- `[M6] Widget finished | CurrentID={ID} ‚Üí Next` ‚Äî —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π, 2—Å.  
    _(–ü–µ—á–∞—Ç–∞–µ–º **–¥–æ** `Set CurrentID=None`, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å ID.)_ (**–ò–ó–ú–ï–ù–ï–ù–û**)
    

**–í –≤–∏–¥–∂–µ—Ç–µ**

- `[W2] StartDisplay | Text={Text} | Duration={Duration}` ‚Äî –∂—ë–ª—Ç—ã–π, 2—Å.
    
- `[W3+] >>> Show() CALLED!` ‚Äî –∂—ë–ª—Ç—ã–π, 10—Å.
    
- `[W3] Show ‚Üí Visible + Opacity=1` ‚Äî –±–µ–ª—ã–π, 2—Å.
    
- `[W5] FadeOut finished ‚Üí Collapsed` ‚Äî —Å–µ—Ä—ã–π, 2—Å.
    
- _(—Å—Ç–∞—Ä—ã–π `[W1] ApplyData ‚Ä¶]` ‚Äî **–£–î–ê–õ–ï–ù–û –∏–∑ –∫–æ–Ω–≤–µ–π–µ—Ä–∞**)_
    

---

‚úÖ **–ü—Ä–æ–≥—Ä–µ—Å—Å (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)**  
–°–¥–µ–ª–∞–Ω–æ:

- –í–∏–¥–∂–µ—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ä–∞–∑–æ–≤–æ –Ω–∞ BeginPlay –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ Viewport —Å Z=1000.
    
- `StartDisplay` –∑–∞–ø–æ–ª–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `Show`.
    
- `Show` –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç `FadeIn` –∏, –µ—Å–ª–∏ `bAutoFadeOut=true`, –¥–µ–ª–∞–µ—Ç `Delay(DisplayTime) ‚Üí ForceFadeOut`.
    
- `ForceFadeOut` —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤–∏–¥–∂–µ—Ç –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `OnPromptFinished`.
    
- –ú–µ–Ω–µ–¥–∂–µ—Ä –ª–æ–≤–∏—Ç `OnPromptFinished` –≤ `HandlePromptFinished` –∏ –¥–≤–∏–≥–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å.
    
- –°—Ç–∞—Ä—ã–µ –ø—É—Ç–∏ (`AddToViewport` –≤ `Show`, —Ç–∞–π–º–µ—Ä—ã `EndTutorialEvent`, –ø—Ä—è–º—ã–µ `ApplyData`) ‚Äî **–æ—Ç–∫–ª—é—á–µ–Ω—ã**. (**–ò–ó–ú–ï–ù–ï–ù–û/–£–î–ê–õ–ï–ù–û**)
    

–ü—Ä–µ–¥—Å—Ç–æ–∏—Ç/–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:

- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç.** –°–µ–π—á–∞—Å –±–µ—Ä—ë–º –∏–∑ –æ—á–µ—Ä–µ–¥–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É. –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
    
    - –í `TryShowNext` –ø–µ—Ä–µ–¥ –≤—ã–±–æ—Ä–æ–º —Å–¥–µ–ª–∞–π—Ç–µ **–ø–æ–∏—Å–∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ Priority**: –ø—Ä–æ–π—Ç–∏ –º–∞—Å—Å–∏–≤ ID ‚Üí –¥–ª—è –∫–∞–∂–¥–æ–≥–æ `GetPromptRow` ‚Üí –≤—ã–±—Ä–∞—Ç—å ID —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º `Priority` ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –µ–≥–æ; –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Å—Ç–∞–≤–∏—Ç—å –≤ –æ—á–µ—Ä–µ–¥–∏. _(–ú–∏–Ω–∏-—à–∞–≥–∏ –¥–∞–º –æ—Ç–¥–µ–ª—å–Ω–æ –ø–æ –í–∞—à–µ–º—É —Å–ª–æ–≤—É.)_